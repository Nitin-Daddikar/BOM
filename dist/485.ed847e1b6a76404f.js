"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[485],{2485:(Z,k,s)=>{s.r(k),s.d(k,{LocationMasterModule:()=>K});var d=s(2200),r=s(4341),f=s(8132),F=s(2796),C=s(1413),j=s(152),v=s(5866),t=s(3664),p=s(8728),_=s(2525),I=s(2277);let m=(()=>{class n{constructor(i){this.apiService=i,this.endpoint="locations"}getLocations(i){return this.apiService.get(_.c.useDummayApi?"68eb2747ae596e708f0f3576/latest?meta=false":this.endpoint,i)}getLocation(i){return this.apiService.get(_.c.useDummayApi?"68eb2766d0ea881f409e6ea3/latest?meta=false":`${this.endpoint}/${i}`)}createLocation(i){return this.apiService.post(this.endpoint,i)}updateLocation(i,o){return this.apiService.put(`${this.endpoint}/${i}`,o)}deleteLocation(i){return this.apiService.delete(`${this.endpoint}/${i}`)}static{this.\u0275fac=function(o){return new(o||n)(p.KVO(I.G))}}static{this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}}return n})();const R=()=>["form/new"],D=(n,l,i)=>({itemsPerPage:n,currentPage:l,totalItems:i,id:"list"}),L=n=>[n];function T(n,l){if(1&n&&t.nrm(0,"span"),2&n){const i=t.XpG();t.HbH(i.class)}}function $(n,l){if(1&n&&t.nrm(0,"span"),2&n){const i=t.XpG();t.HbH(i.class)}}function G(n,l){1&n&&(t.j41(0,"tr")(1,"td",25)(2,"div",26)(3,"span",27),t.EFF(4,"Loading..."),t.k0s()()()())}function S(n,l){if(1&n&&(t.j41(0,"tr",28)(1,"td",25),t.EFF(2),t.k0s()()),2&n){const i=t.XpG();t.R7$(2),t.SpI(" ",i.error," ")}}function Y(n,l){if(1&n){const i=t.RV6();t.j41(0,"tr")(1,"td")(2,"a",29),t.nrm(3,"i",30),t.k0s(),t.j41(4,"a",31),t.nrm(5,"i",32),t.k0s(),t.j41(6,"a",33),t.bIt("click",function(){const e=p.eBV(i).$implicit,a=t.XpG();return p.Njj(a.deleteLocation(e.id))}),t.nrm(7,"i",34),t.k0s()(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td")(11,"span",35),t.EFF(12),t.k0s()()()}if(2&n){const i=l.$implicit;t.R7$(2),t.Y8G("routerLink",t.eq3(5,L,"view/"+i.id)),t.R7$(2),t.Y8G("routerLink",t.eq3(7,L,"form/"+i.id)),t.R7$(5),t.JRh(i.name),t.R7$(2),t.Y8G("ngClass","Plant"===i.type?"bg-success":"bg-info"),t.R7$(),t.SpI(" ",i.type," ")}}function N(n,l){1&n&&(t.j41(0,"tr")(1,"td",25),t.EFF(2,"No locations found"),t.k0s()())}let w=(()=>{class n{constructor(i){this.locationService=i,this.locations=[],this.loading=!1,this.error="",this.paginationData={total:0,from:0,to:0,prev_page_url:null,next_page_url:null,per_page:v.v.PAGINATION.PER_PAGE,current_page:v.v.PAGINATION.DEFAULT_PAGE},this.search={name:"",type:""},this.key=v.k.DEFAULT_SORT_KEY,this.order="ASC",this.class="",this.reverse=!0,this.searchNotifier=new C.B}ngOnInit(){this.getData(),this.searchNotifier.pipe((0,j.B)(750)).subscribe(()=>this.getData())}getReset(){Object.keys(this.search).forEach(i=>{this.search[i]=""}),this.getData()}sort(i=""){""!=i?(this.key=i,this.reverse?(this.order="ASC",this.class="fa fa-sort-alpha-asc"):(this.order="DESC",this.class="fa fa-sort-alpha-desc")):(this.key="",this.order=""),this.reverse=!this.reverse,this.getData(this.paginationData.current_page)}getData(i=1){this.loading=!0,this.error="";let o={page:i,per_page:this.paginationData.per_page};Object.keys(this.search).forEach(e=>{""!==this.search[e]&&(o[`search[${e}]`]=this.search[e])}),this.key&&(o[`sort[${this.key}]`]=this.order),this.locationService.getLocations(o).subscribe({next:e=>{e.success&&e.data?(this.locations=e.data.data||[],this.paginationData={total:e.data.meta?.total||0,from:e.data.meta?.from||0,to:e.data.meta?.to||0,prev_page_url:e.data.meta?.prev_page_url,next_page_url:e.data.meta?.next_page_url,per_page:e.data.meta?.per_page||this.paginationData.per_page,current_page:e.data.meta?.current_page||1,id:"list"}):this.error="Failed to load locations",this.loading=!1},error:e=>{console.error("Error loading locations:",e),this.error="An error occurred while loading locations",this.loading=!1}})}deleteLocation(i){confirm("Are you sure you want to delete this location?")&&this.locationService.deleteLocation(i).subscribe({next:o=>{o.success&&this.getData(this.paginationData.current_page)},error:o=>{console.error("Error deleting location:",o),alert("Failed to delete location")}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-location-list"]],standalone:!1,decls:52,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"card-header-right"],[1,"btn","btn-primary",3,"routerLink"],[1,"feather","icon-plus"],[1,"card-body","table-border-style","p-0"],[1,"table-responsive"],[1,"table","table-hover"],[2,"width","100px"],[3,"click"],[3,"class",4,"ngIf"],["data-original-title","","title","Search",1,"primary","p-0",3,"click"],[1,"fa","fa-search","font-medium-1","mr-1"],["data-original-title","","title","Clear",1,"danger","p-0",3,"click"],[1,"feather","icon-x","font-medium-1","mr-1"],["type","text","placeholder","Search name...",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","Plant"],["value","Warehouse"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["id","list",3,"pageChange"],["colspan","3",1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-danger"],["title","View",1,"warning","p-0","me-2",3,"routerLink"],[1,"feather","icon-eye"],["title","Edit",1,"warning","p-0","me-2",3,"routerLink"],[1,"feather","icon-edit"],["title","Delete",1,"warning","p-0",3,"click"],[1,"feather","icon-trash-2"],[1,"badge",3,"ngClass"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3,"Location List"),t.k0s(),t.j41(4,"div",2)(5,"button",3),t.nrm(6,"i",4),t.EFF(7," Add New Location "),t.k0s()()(),t.j41(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th",8),t.EFF(14,"Action"),t.k0s(),t.j41(15,"th")(16,"a",9),t.bIt("click",function(){return e.sort("name")}),t.EFF(17," Name "),t.DNE(18,T,1,2,"span",10),t.k0s()(),t.j41(19,"th")(20,"a",9),t.bIt("click",function(){return e.sort("type")}),t.EFF(21," Type "),t.DNE(22,$,1,2,"span",10),t.k0s()()(),t.j41(23,"tr")(24,"th")(25,"a",11),t.bIt("click",function(){return e.getData()}),t.nrm(26,"i",12),t.k0s(),t.EFF(27," \xa0\xa0 "),t.j41(28,"a",13),t.bIt("click",function(){return e.getReset()}),t.nrm(29,"i",14),t.k0s()(),t.j41(30,"th")(31,"input",15),t.mxI("ngModelChange",function(c){return t.DH7(e.search.name,c)||(e.search.name=c),c}),t.bIt("ngModelChange",function(){return e.searchNotifier.next()}),t.k0s()(),t.j41(32,"th")(33,"select",16),t.mxI("ngModelChange",function(c){return t.DH7(e.search.type,c)||(e.search.type=c),c}),t.bIt("ngModelChange",function(){return e.searchNotifier.next()}),t.j41(34,"option",17),t.EFF(35,"All Types"),t.k0s(),t.j41(36,"option",18),t.EFF(37,"Plant"),t.k0s(),t.j41(38,"option",19),t.EFF(39,"Warehouse"),t.k0s()()()()(),t.j41(40,"tbody"),t.DNE(41,G,5,0,"tr",20)(42,S,3,1,"tr",21)(43,Y,13,9,"tr",22),t.nI1(44,"paginate"),t.DNE(45,N,3,0,"tr",20),t.k0s()(),t.j41(46,"div",23)(47,"div"),t.EFF(48),t.k0s(),t.j41(49,"div")(50,"nav")(51,"pagination-controls",24),t.bIt("pageChange",function(c){return e.getData(c)}),t.k0s()()()()()()()),2&o&&(t.R7$(5),t.Y8G("routerLink",t.lJ4(15,R)),t.R7$(13),t.Y8G("ngIf","name"==e.key),t.R7$(4),t.Y8G("ngIf","type"==e.key),t.R7$(9),t.R50("ngModel",e.search.name),t.R7$(2),t.R50("ngModel",e.search.type),t.R7$(8),t.Y8G("ngIf",e.loading),t.R7$(),t.Y8G("ngIf",e.error),t.R7$(),t.Y8G("ngForOf",t.i5U(44,12,e.locations,t.sMw(16,D,e.paginationData.per_page,e.paginationData.current_page,e.paginationData.total))),t.R7$(2),t.Y8G("ngIf",!e.loading&&!e.error&&0===e.locations.length),t.R7$(3),t.E5c(" Showing ",e.paginationData.from," to ",e.paginationData.to," of ",e.paginationData.total," Entries "))},dependencies:[d.YU,d.Sq,d.bT,r.xH,r.y7,r.me,r.wz,r.BC,r.vS,f.Wk,F.ej,F.kf],encapsulation:2})}}return n})();var y=s(8738),E=s(7303);const b=n=>({"is-invalid":n});function A(n,l){1&n&&(t.j41(0,"div",23)(1,"div",24)(2,"span",25),t.EFF(3,"Loading..."),t.k0s()()())}function U(n,l){1&n&&(t.j41(0,"div",26),t.EFF(1," Name is required "),t.k0s())}function M(n,l){1&n&&(t.j41(0,"div",27),t.EFF(1," Type is required "),t.k0s())}let X=(()=>{class n{constructor(i,o,e,a){this.fb=i,this.route=o,this.location=e,this.locationService=a,this.isEditing=!1,this.loading=!1,this.locationId=null,this.locationForm=this.fb.group({name:["",[r.k0.required]],type:["Plant",[r.k0.required]]})}ngOnInit(){this.locationId="new"===this.route.snapshot.params.id?null:+this.route.snapshot.params.id,this.locationId&&(this.isEditing=!0,this.loadLocationData())}loadLocationData(){this.loading=!0,this.locationService.getLocation(this.locationId).subscribe({next:i=>{i.success&&i.data&&this.locationForm.patchValue(i.data),this.loading=!1},error:i=>{console.error("Error loading location:",i),this.loading=!1}})}onSubmit(){if(this.locationForm.invalid)return void Object.keys(this.locationForm.controls).forEach(o=>{const e=this.locationForm.get(o);e?.invalid&&e.markAsTouched()});const i=this.locationForm.value;this.loading=!0,this.isEditing?this.locationService.updateLocation(this.locationId,i).subscribe({next:o=>{this.loading=!1,o.success&&this.goBack()},error:o=>{this.loading=!1,console.error("Error updating location:",o)}}):this.locationService.createLocation(i).subscribe({next:o=>{this.loading=!1,o.success&&this.goBack()},error:o=>{this.loading=!1,console.error("Error creating location:",o)}})}goBack(){this.location.back()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(r.ok),t.rXU(y.nX),t.rXU(E.aZ),t.rXU(m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-location-form"]],standalone:!1,decls:38,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],["class","text-center mb-3",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"mb-3"],[1,"form-group","mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mt-2"],[1,"form-check","form-check-inline"],["type","radio","formControlName","type","id","type-plant","value","Plant",1,"form-check-input",3,"ngClass"],["for","type-plant",1,"form-check-label"],["type","radio","formControlName","type","id","type-warehouse","value","Warehouse",1,"form-check-input",3,"ngClass"],["for","type-warehouse",1,"form-check-label"],["class","invalid-feedback d-block",4,"ngIf"],[1,"text-end","mt-4"],["type","button",1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","mb-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"invalid-feedback"],[1,"invalid-feedback","d-block"]],template:function(o,e){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3),t.k0s()(),t.j41(4,"div",2)(5,"form",3),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.DNE(6,A,4,0,"div",4),t.j41(7,"div",5)(8,"div",6)(9,"h6",7),t.EFF(10,"Location Information"),t.k0s(),t.j41(11,"div",8)(12,"label",9),t.EFF(13,"Name "),t.j41(14,"span",10),t.EFF(15,"*"),t.k0s()(),t.nrm(16,"input",11),t.DNE(17,U,2,0,"div",12),t.k0s(),t.j41(18,"div",8)(19,"label",9),t.EFF(20,"Type "),t.j41(21,"span",10),t.EFF(22,"*"),t.k0s()(),t.j41(23,"div",13)(24,"div",14),t.nrm(25,"input",15),t.j41(26,"label",16),t.EFF(27," Plant "),t.k0s()(),t.j41(28,"div",14),t.nrm(29,"input",17),t.j41(30,"label",18),t.EFF(31," Warehouse "),t.k0s()()(),t.DNE(32,M,2,0,"div",19),t.k0s()()(),t.j41(33,"div",20)(34,"button",21),t.bIt("click",function(){return e.goBack()}),t.EFF(35,"Cancel"),t.k0s(),t.j41(36,"button",22),t.EFF(37),t.k0s()()()()()),2&o){let a,c,h,u,g;t.R7$(3),t.SpI("",e.isEditing?"Edit":"Add"," Location"),t.R7$(2),t.Y8G("formGroup",e.locationForm),t.R7$(),t.Y8G("ngIf",e.loading),t.R7$(10),t.Y8G("ngClass",t.eq3(10,b,(null==(a=e.locationForm.get("name"))?null:a.touched)&&(null==(a=e.locationForm.get("name"))?null:a.invalid))),t.R7$(),t.Y8G("ngIf",(null==(c=e.locationForm.get("name"))?null:c.touched)&&(null==(c=e.locationForm.get("name"))?null:c.invalid)),t.R7$(8),t.Y8G("ngClass",t.eq3(12,b,(null==(h=e.locationForm.get("type"))?null:h.touched)&&(null==(h=e.locationForm.get("type"))?null:h.invalid))),t.R7$(4),t.Y8G("ngClass",t.eq3(14,b,(null==(u=e.locationForm.get("type"))?null:u.touched)&&(null==(u=e.locationForm.get("type"))?null:u.invalid))),t.R7$(3),t.Y8G("ngIf",(null==(g=e.locationForm.get("type"))?null:g.touched)&&(null==(g=e.locationForm.get("type"))?null:g.invalid)),t.R7$(4),t.Y8G("disabled",e.loading),t.R7$(),t.SpI(" ",e.isEditing?"Update":"Create"," Location ")}},dependencies:[d.YU,d.bT,r.qT,r.me,r.Fm,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}}return n})();const B=n=>[n];function P(n,l){1&n&&(t.j41(0,"div",10)(1,"div",11)(2,"span",12),t.EFF(3,"Loading..."),t.k0s()()())}function V(n,l){if(1&n&&(t.j41(0,"div")(1,"div",13)(2,"div",14)(3,"h6",15),t.EFF(4,"Location Information"),t.k0s(),t.j41(5,"table",16)(6,"tbody")(7,"tr")(8,"th",17),t.EFF(9,"Location ID"),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s()(),t.j41(12,"tr")(13,"th"),t.EFF(14,"Name"),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s()(),t.j41(17,"tr")(18,"th"),t.EFF(19,"Type"),t.k0s(),t.j41(20,"td")(21,"span",18),t.EFF(22),t.k0s()()()()()(),t.j41(23,"div",19)(24,"h6",15),t.EFF(25,"Timestamps"),t.k0s(),t.j41(26,"table",16)(27,"tbody")(28,"tr")(29,"th",20),t.EFF(30,"Created At"),t.k0s(),t.j41(31,"td"),t.EFF(32),t.nI1(33,"date"),t.k0s()(),t.j41(34,"tr")(35,"th"),t.EFF(36,"Last Updated"),t.k0s(),t.j41(37,"td"),t.EFF(38),t.nI1(39,"date"),t.k0s()()()()()()()),2&n){const i=t.XpG();t.R7$(11),t.JRh(i.location.id),t.R7$(5),t.JRh(i.location.name),t.R7$(5),t.Y8G("ngClass","Plant"===i.location.type?"bg-success":"bg-info"),t.R7$(),t.SpI(" ",i.location.type," "),t.R7$(10),t.JRh(t.i5U(33,6,i.location.created_at,"medium")),t.R7$(6),t.JRh(t.i5U(39,9,i.location.updated_at,"medium"))}}function O(n,l){1&n&&(t.j41(0,"div",10)(1,"p",21),t.EFF(2,"Location not found"),t.k0s()())}let H=(()=>{class n{constructor(i,o,e){this.route=i,this.angularLocation=o,this.locationService=e,this.location=null,this.loading=!1,this.locationId=null}ngOnInit(){this.locationId=+this.route.snapshot.params.id,this.locationId&&this.loadLocationData()}loadLocationData(){this.loading=!0,this.locationService.getLocation(this.locationId).subscribe({next:i=>{i.success&&i.data&&(this.location=i.data),this.loading=!1},error:i=>{console.error("Error loading location:",i),this.loading=!1}})}goBack(){this.angularLocation.back()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(y.nX),t.rXU(E.aZ),t.rXU(m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-location-view"]],standalone:!1,decls:15,vars:6,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"button-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-arrow-left"],["type","button",1,"btn","btn-secondary","ms-2",3,"routerLink"],[1,"feather","icon-edit"],[1,"card-body"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row"],[1,"col-md-8","mb-4"],[1,"mb-3"],[1,"table","table-bordered"],["width","30%"],[1,"badge",3,"ngClass"],[1,"col-md-4","mb-4"],["width","40%"],[1,"text-muted"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3,"Location Details"),t.k0s(),t.j41(4,"div",2)(5,"button",3),t.bIt("click",function(){return e.goBack()}),t.nrm(6,"i",4),t.EFF(7," Back "),t.k0s(),t.j41(8,"button",5),t.nrm(9,"i",6),t.EFF(10," Edit "),t.k0s()()(),t.j41(11,"div",7),t.DNE(12,P,4,0,"div",8)(13,V,40,12,"div",9)(14,O,3,0,"div",8),t.k0s()()),2&o&&(t.R7$(8),t.Y8G("routerLink",t.eq3(4,B,"../../form/"+(null==e.location?null:e.location.id))),t.R7$(4),t.Y8G("ngIf",e.loading),t.R7$(),t.Y8G("ngIf",!e.loading&&e.location),t.R7$(),t.Y8G("ngIf",!e.loading&&!e.location))},dependencies:[d.YU,d.bT,f.Wk,d.vh],encapsulation:2})}}return n})();var J=s(2389);const W=[{path:"",component:w},{path:"form/:id",component:X},{path:"view/:id",component:H}];let K=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=p.G2t({providers:[m],imports:[d.MD,r.YN,r.X1,f.iI.forChild(W),J.G,F.ed]})}}return n})()}}]);