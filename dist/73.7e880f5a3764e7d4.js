"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[73],{2073:(ee,b,o)=>{o.r(b),o.d(b,{SupplierMasterModule:()=>z});var u=o(2200),s=o(4341),_=o(8132),F=o(2796),I=o(1413),R=o(152),v=o(5866),e=o(3664),d=o(8728),S=o(2525),y=o(2277);let m=(()=>{class r{constructor(i){this.apiService=i,this.endpoint="suppliers"}getSuppliers(i){return this.apiService.get(S.c.useDummayApi?"68eb2a4543b1c97be96380cb/latest?meta=false":this.endpoint,i)}getSupplier(i){return this.apiService.get(S.c.useDummayApi?"68eb2a64d0ea881f409e70ca/latest?meta=false":`${this.endpoint}/${i}`)}createSupplier(i){return this.apiService.post(this.endpoint,i)}updateSupplier(i,n){return this.apiService.put(`${this.endpoint}/${i}`,n)}deleteSupplier(i){return this.apiService.delete(`${this.endpoint}/${i}`)}static{this.\u0275fac=function(n){return new(n||r)(d.KVO(y.G))}}static{this.\u0275prov=d.jDH({token:r,factory:r.\u0275fac})}}return r})();const D=()=>["form/new"],T=(r,l,i)=>({itemsPerPage:r,currentPage:l,totalItems:i,id:"list"}),E=r=>[r];function $(r,l){if(1&r&&e.nrm(0,"span"),2&r){const i=e.XpG();e.HbH(i.class)}}function L(r,l){if(1&r&&e.nrm(0,"span"),2&r){const i=e.XpG();e.HbH(i.class)}}function G(r,l){if(1&r&&e.nrm(0,"span"),2&r){const i=e.XpG();e.HbH(i.class)}}function M(r,l){1&r&&(e.j41(0,"tr")(1,"td",23)(2,"div",24)(3,"span",25),e.EFF(4,"Loading..."),e.k0s()()()())}function N(r,l){if(1&r&&(e.j41(0,"tr",26)(1,"td",23),e.EFF(2),e.k0s()()),2&r){const i=e.XpG();e.R7$(2),e.SpI(" ",i.error," ")}}function Y(r,l){if(1&r){const i=e.RV6();e.j41(0,"tr")(1,"td")(2,"a",27),e.nrm(3,"i",28),e.k0s(),e.j41(4,"a",29),e.nrm(5,"i",30),e.k0s(),e.j41(6,"a",31),e.bIt("click",function(){const t=d.eBV(i).$implicit,a=e.XpG();return d.Njj(a.deleteSupplier(t.id))}),e.nrm(7,"i",32),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s()()}if(2&r){const i=l.$implicit;e.R7$(2),e.Y8G("routerLink",e.eq3(5,E,"view/"+i.id)),e.R7$(2),e.Y8G("routerLink",e.eq3(7,E,"form/"+i.id)),e.R7$(5),e.JRh(i.name),e.R7$(2),e.JRh(i.lead_time),e.R7$(2),e.JRh(i.moq)}}function w(r,l){1&r&&(e.j41(0,"tr")(1,"td",23),e.EFF(2,"No suppliers found"),e.k0s()())}let A=(()=>{class r{constructor(i){this.supplierService=i,this.suppliers=[],this.loading=!1,this.error="",this.paginationData={total:0,from:0,to:0,prev_page_url:null,next_page_url:null,per_page:v.v.PAGINATION.PER_PAGE,current_page:v.v.PAGINATION.DEFAULT_PAGE},this.search={name:"",lead_time:"",moq:""},this.key=v.k.DEFAULT_SORT_KEY,this.order="ASC",this.class="",this.reverse=!0,this.searchNotifier=new I.B}ngOnInit(){this.getData(),this.searchNotifier.pipe((0,R.B)(750)).subscribe(()=>this.getData())}getReset(){Object.keys(this.search).forEach(i=>{this.search[i]=""}),this.getData()}sort(i=""){""!=i?(this.key=i,this.reverse?(this.order="ASC",this.class="fa fa-sort-alpha-asc"):(this.order="DESC",this.class="fa fa-sort-alpha-desc")):(this.key="",this.order=""),this.reverse=!this.reverse,this.getData(this.paginationData.current_page)}getData(i=1){this.loading=!0,this.error="";let n={page:i,per_page:this.paginationData.per_page};Object.keys(this.search).forEach(t=>{""!==this.search[t]&&(n[`search[${t}]`]=this.search[t])}),this.key&&(n[`sort[${this.key}]`]=this.order),this.supplierService.getSuppliers(n).subscribe({next:t=>{t.success&&t.data?(this.suppliers=t.data.data||[],this.paginationData={total:t.data.meta?.total||0,from:t.data.meta?.from||0,to:t.data.meta?.to||0,prev_page_url:t.data.meta?.prev_page_url,next_page_url:t.data.meta?.next_page_url,per_page:t.data.meta?.per_page||this.paginationData.per_page,current_page:t.data.meta?.current_page||1,id:"list"}):this.error="Failed to load suppliers",this.loading=!1},error:t=>{console.error("Error loading suppliers:",t),this.error="An error occurred while loading suppliers",this.loading=!1}})}deleteSupplier(i){confirm("Are you sure you want to delete this supplier?")&&this.supplierService.deleteSupplier(i).subscribe({next:n=>{n.success&&this.getData(this.paginationData.current_page)},error:n=>{console.error("Error deleting supplier:",n),alert("Failed to delete supplier")}})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(m))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-supplier-list"]],standalone:!1,decls:52,vars:22,consts:[[1,"card"],[1,"card-header"],[1,"card-header-right"],[1,"btn","btn-primary",3,"routerLink"],[1,"feather","icon-plus"],[1,"card-body","table-border-style","p-0"],[1,"table-responsive"],[1,"table","table-hover"],[2,"width","100px"],[3,"click"],[3,"class",4,"ngIf"],["data-original-title","","title","Search",1,"primary","p-0",3,"click"],[1,"fa","fa-search","font-medium-1","mr-1"],["data-original-title","","title","Clear",1,"danger","p-0",3,"click"],[1,"feather","icon-x","font-medium-1","mr-1"],["type","text","placeholder","Search name...",3,"ngModelChange","ngModel"],["type","number","placeholder","Search lead time...",3,"ngModelChange","ngModel"],["type","text","placeholder","Search MOQ...",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["id","list",3,"pageChange"],["colspan","4",1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-danger"],["title","View",1,"warning","p-0","me-2",3,"routerLink"],[1,"feather","icon-eye"],["title","Edit",1,"warning","p-0","me-2",3,"routerLink"],[1,"feather","icon-edit"],["title","Delete",1,"warning","p-0",3,"click"],[1,"feather","icon-trash-2"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h5"),e.EFF(3,"Supplier List"),e.k0s(),e.j41(4,"div",2)(5,"button",3),e.nrm(6,"i",4),e.EFF(7," Add New Supplier "),e.k0s()()(),e.j41(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th",8),e.EFF(14,"Action"),e.k0s(),e.j41(15,"th")(16,"a",9),e.bIt("click",function(){return t.sort("name")}),e.EFF(17," Name "),e.DNE(18,$,1,2,"span",10),e.k0s()(),e.j41(19,"th")(20,"a",9),e.bIt("click",function(){return t.sort("lead_time")}),e.EFF(21," Lead Time "),e.DNE(22,L,1,2,"span",10),e.k0s()(),e.j41(23,"th")(24,"a",9),e.bIt("click",function(){return t.sort("moq")}),e.EFF(25," MOQ "),e.DNE(26,G,1,2,"span",10),e.k0s()()(),e.j41(27,"tr")(28,"th")(29,"a",11),e.bIt("click",function(){return t.getData()}),e.nrm(30,"i",12),e.k0s(),e.EFF(31," \xa0\xa0 "),e.j41(32,"a",13),e.bIt("click",function(){return t.getReset()}),e.nrm(33,"i",14),e.k0s()(),e.j41(34,"th")(35,"input",15),e.mxI("ngModelChange",function(p){return e.DH7(t.search.name,p)||(t.search.name=p),p}),e.bIt("ngModelChange",function(){return t.searchNotifier.next()}),e.k0s()(),e.j41(36,"th")(37,"input",16),e.mxI("ngModelChange",function(p){return e.DH7(t.search.lead_time,p)||(t.search.lead_time=p),p}),e.bIt("ngModelChange",function(){return t.searchNotifier.next()}),e.k0s()(),e.j41(38,"th")(39,"input",17),e.mxI("ngModelChange",function(p){return e.DH7(t.search.moq,p)||(t.search.moq=p),p}),e.bIt("ngModelChange",function(){return t.searchNotifier.next()}),e.k0s()()()(),e.j41(40,"tbody"),e.DNE(41,M,5,0,"tr",18)(42,N,3,1,"tr",19)(43,Y,14,9,"tr",20),e.nI1(44,"paginate"),e.DNE(45,w,3,0,"tr",18),e.k0s()(),e.j41(46,"div",21)(47,"div"),e.EFF(48),e.k0s(),e.j41(49,"div")(50,"nav")(51,"pagination-controls",22),e.bIt("pageChange",function(p){return t.getData(p)}),e.k0s()()()()()()()),2&n&&(e.R7$(5),e.Y8G("routerLink",e.lJ4(17,D)),e.R7$(13),e.Y8G("ngIf","name"==t.key),e.R7$(4),e.Y8G("ngIf","lead_time"==t.key),e.R7$(4),e.Y8G("ngIf","moq"==t.key),e.R7$(9),e.R50("ngModel",t.search.name),e.R7$(2),e.R50("ngModel",t.search.lead_time),e.R7$(2),e.R50("ngModel",t.search.moq),e.R7$(2),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.error),e.R7$(),e.Y8G("ngForOf",e.i5U(44,14,t.suppliers,e.sMw(18,T,t.paginationData.per_page,t.paginationData.current_page,t.paginationData.total))),e.R7$(2),e.Y8G("ngIf",!t.loading&&!t.error&&0===t.suppliers.length),e.R7$(3),e.E5c(" Showing ",t.paginationData.from," to ",t.paginationData.to," of ",t.paginationData.total," Entries "))},dependencies:[u.Sq,u.bT,s.me,s.Q0,s.BC,s.vS,_.Wk,F.ej,F.kf],encapsulation:2})}}return r})();var C=o(8738),j=o(7303);const k=r=>({"is-invalid":r});function U(r,l){1&r&&(e.j41(0,"div",18)(1,"div",19)(2,"span",20),e.EFF(3,"Loading..."),e.k0s()()())}function X(r,l){1&r&&(e.j41(0,"div",21),e.EFF(1," Name is required "),e.k0s())}function O(r,l){1&r&&(e.j41(0,"span"),e.EFF(1,"Lead time is required"),e.k0s())}function B(r,l){1&r&&(e.j41(0,"span"),e.EFF(1,"Lead time must be 0 or greater"),e.k0s())}function q(r,l){if(1&r&&(e.j41(0,"div",21),e.DNE(1,O,2,0,"span",22)(2,B,2,0,"span",22),e.k0s()),2&r){let i,n;const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==(i=t.supplierForm.get("lead_time"))||null==i.errors?null:i.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=t.supplierForm.get("lead_time"))||null==n.errors?null:n.errors.min)}}function V(r,l){1&r&&(e.j41(0,"div",21),e.EFF(1," MOQ is required "),e.k0s())}let J=(()=>{class r{constructor(i,n,t,a){this.fb=i,this.route=n,this.location=t,this.supplierService=a,this.isEditing=!1,this.loading=!1,this.supplierId=null,this.supplierForm=this.fb.group({name:["",[s.k0.required]],lead_time:["",[s.k0.required,s.k0.min(0)]],moq:["",[s.k0.required]]})}ngOnInit(){this.supplierId="new"===this.route.snapshot.params.id?null:+this.route.snapshot.params.id,this.supplierId&&(this.isEditing=!0,this.loadSupplierData())}loadSupplierData(){this.loading=!0,this.supplierService.getSupplier(this.supplierId).subscribe({next:i=>{i.success&&i.data&&this.supplierForm.patchValue(i.data),this.loading=!1},error:i=>{console.error("Error loading supplier:",i),this.loading=!1}})}onSubmit(){if(this.supplierForm.invalid)return void Object.keys(this.supplierForm.controls).forEach(n=>{const t=this.supplierForm.get(n);t?.invalid&&t.markAsTouched()});const i=this.supplierForm.value;this.loading=!0,this.isEditing?this.supplierService.updateSupplier(this.supplierId,i).subscribe({next:n=>{this.loading=!1,n.success&&this.goBack()},error:n=>{this.loading=!1,console.error("Error updating supplier:",n)}}):this.supplierService.createSupplier(i).subscribe({next:n=>{this.loading=!1,n.success&&this.goBack()},error:n=>{this.loading=!1,console.error("Error creating supplier:",n)}})}goBack(){this.location.back()}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(s.ok),e.rXU(C.nX),e.rXU(j.aZ),e.rXU(m))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-supplier-form"]],standalone:!1,decls:37,vars:17,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],["class","text-center mb-3",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"mb-3"],[1,"form-group","mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","number","formControlName","lead_time",1,"form-control",3,"ngClass"],["type","text","formControlName","moq",1,"form-control",3,"ngClass"],[1,"text-end","mt-4"],["type","button",1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","mb-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(n,t){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h5"),e.EFF(3),e.k0s()(),e.j41(4,"div",2)(5,"form",3),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.DNE(6,U,4,0,"div",4),e.j41(7,"div",5)(8,"div",6)(9,"h6",7),e.EFF(10,"Supplier Information"),e.k0s(),e.j41(11,"div",8)(12,"label",9),e.EFF(13,"Name "),e.j41(14,"span",10),e.EFF(15,"*"),e.k0s()(),e.nrm(16,"input",11),e.DNE(17,X,2,0,"div",12),e.k0s(),e.j41(18,"div",8)(19,"label",9),e.EFF(20,"Lead Time "),e.j41(21,"span",10),e.EFF(22,"*"),e.k0s()(),e.nrm(23,"input",13),e.DNE(24,q,3,2,"div",12),e.k0s(),e.j41(25,"div",8)(26,"label",9),e.EFF(27,"MOQ "),e.j41(28,"span",10),e.EFF(29,"*"),e.k0s()(),e.nrm(30,"input",14),e.DNE(31,V,2,0,"div",12),e.k0s()()(),e.j41(32,"div",15)(33,"button",16),e.bIt("click",function(){return t.goBack()}),e.EFF(34,"Cancel"),e.k0s(),e.j41(35,"button",17),e.EFF(36),e.k0s()()()()()),2&n){let a,p,c,h,g,f;e.R7$(3),e.SpI("",t.isEditing?"Edit":"Add"," Supplier"),e.R7$(2),e.Y8G("formGroup",t.supplierForm),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(10),e.Y8G("ngClass",e.eq3(11,k,(null==(a=t.supplierForm.get("name"))?null:a.touched)&&(null==(a=t.supplierForm.get("name"))?null:a.invalid))),e.R7$(),e.Y8G("ngIf",(null==(p=t.supplierForm.get("name"))?null:p.touched)&&(null==(p=t.supplierForm.get("name"))?null:p.invalid)),e.R7$(6),e.Y8G("ngClass",e.eq3(13,k,(null==(c=t.supplierForm.get("lead_time"))?null:c.touched)&&(null==(c=t.supplierForm.get("lead_time"))?null:c.invalid))),e.R7$(),e.Y8G("ngIf",(null==(h=t.supplierForm.get("lead_time"))?null:h.touched)&&(null==(h=t.supplierForm.get("lead_time"))?null:h.invalid)),e.R7$(6),e.Y8G("ngClass",e.eq3(15,k,(null==(g=t.supplierForm.get("moq"))?null:g.touched)&&(null==(g=t.supplierForm.get("moq"))?null:g.invalid))),e.R7$(),e.Y8G("ngIf",(null==(f=t.supplierForm.get("moq"))?null:f.touched)&&(null==(f=t.supplierForm.get("moq"))?null:f.invalid)),e.R7$(4),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.isEditing?"Update":"Create"," Supplier ")}},dependencies:[u.YU,u.bT,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}}return r})();const H=r=>[r];function P(r,l){1&r&&(e.j41(0,"div",10)(1,"div",11)(2,"span",12),e.EFF(3,"Loading..."),e.k0s()()())}function Q(r,l){if(1&r&&(e.j41(0,"div")(1,"div",13)(2,"div",14)(3,"h6",15),e.EFF(4,"Supplier Information"),e.k0s(),e.j41(5,"table",16)(6,"tbody")(7,"tr")(8,"th",17),e.EFF(9,"Supplier ID"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s()(),e.j41(12,"tr")(13,"th"),e.EFF(14,"Name"),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()(),e.j41(17,"tr")(18,"th"),e.EFF(19,"Lead Time"),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s()(),e.j41(22,"tr")(23,"th"),e.EFF(24,"MOQ"),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s()()()()(),e.j41(27,"div",18)(28,"h6",15),e.EFF(29,"Timestamps"),e.k0s(),e.j41(30,"table",16)(31,"tbody")(32,"tr")(33,"th",19),e.EFF(34,"Created At"),e.k0s(),e.j41(35,"td"),e.EFF(36),e.nI1(37,"date"),e.k0s()(),e.j41(38,"tr")(39,"th"),e.EFF(40,"Last Updated"),e.k0s(),e.j41(41,"td"),e.EFF(42),e.nI1(43,"date"),e.k0s()()()()()()()),2&r){const i=e.XpG();e.R7$(11),e.JRh(i.supplier.id),e.R7$(5),e.JRh(i.supplier.name),e.R7$(5),e.JRh(i.supplier.lead_time),e.R7$(5),e.JRh(i.supplier.moq),e.R7$(10),e.JRh(e.i5U(37,6,i.supplier.created_at,"medium")),e.R7$(6),e.JRh(e.i5U(43,9,i.supplier.updated_at,"medium"))}}function K(r,l){1&r&&(e.j41(0,"div",10)(1,"p",20),e.EFF(2,"Supplier not found"),e.k0s()())}let W=(()=>{class r{constructor(i,n,t){this.route=i,this.location=n,this.supplierService=t,this.supplier=null,this.loading=!1,this.supplierId=null}ngOnInit(){this.supplierId=+this.route.snapshot.params.id,this.supplierId&&this.loadSupplierData()}loadSupplierData(){this.loading=!0,this.supplierService.getSupplier(this.supplierId).subscribe({next:i=>{i.success&&i.data&&(this.supplier=i.data),this.loading=!1},error:i=>{console.error("Error loading supplier:",i),this.loading=!1}})}goBack(){this.location.back()}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(C.nX),e.rXU(j.aZ),e.rXU(m))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-supplier-view"]],standalone:!1,decls:15,vars:6,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"button-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-arrow-left"],["type","button",1,"btn","btn-secondary","ms-2",3,"routerLink"],[1,"feather","icon-edit"],[1,"card-body"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row"],[1,"col-md-8","mb-4"],[1,"mb-3"],[1,"table","table-bordered"],["width","30%"],[1,"col-md-4","mb-4"],["width","40%"],[1,"text-muted"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h5"),e.EFF(3,"Supplier Details"),e.k0s(),e.j41(4,"div",2)(5,"button",3),e.bIt("click",function(){return t.goBack()}),e.nrm(6,"i",4),e.EFF(7," Back "),e.k0s(),e.j41(8,"button",5),e.nrm(9,"i",6),e.EFF(10," Edit "),e.k0s()()(),e.j41(11,"div",7),e.DNE(12,P,4,0,"div",8)(13,Q,44,12,"div",9)(14,K,3,0,"div",8),e.k0s()()),2&n&&(e.R7$(8),e.Y8G("routerLink",e.eq3(4,H,"../../form/"+(null==t.supplier?null:t.supplier.id))),e.R7$(4),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading&&t.supplier),e.R7$(),e.Y8G("ngIf",!t.loading&&!t.supplier))},dependencies:[u.bT,_.Wk,u.vh],encapsulation:2})}}return r})();var Z=o(2389);const x=[{path:"",component:A},{path:"form/:id",component:J},{path:"view/:id",component:W}];let z=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=d.G2t({providers:[m],imports:[u.MD,s.YN,s.X1,_.iI.forChild(x),Z.G,F.ed]})}}return r})()}}]);