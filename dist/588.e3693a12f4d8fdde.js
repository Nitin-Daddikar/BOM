"use strict";(self.webpackChunkdatta_able_free_angular_admin_template=self.webpackChunkdatta_able_free_angular_admin_template||[]).push([[588],{5588:(Q,b,s)=>{s.r(b),s.d(b,{ProductMasterModule:()=>z});var l=s(2200),c=s(4341),F=s(8132),_=s(2796),j=s(1413),I=s(152),v=s(5866),t=s(3664),u=s(8728),C=s(2525),R=s(2277);let p=(()=>{class r{constructor(o){this.apiService=o,this.endpoint="products"}getProducts(o){return this.apiService.get(C.c.useDummayApi?"68eb235243b1c97be9637b56/latest?meta=false":this.endpoint,o)}getProduct(o){return this.apiService.get(C.c.useDummayApi?"68eb25fe43b1c97be9637d8e/latest?meta=false":`${this.endpoint}/${o}`)}createProduct(o){return this.apiService.post(this.endpoint,o)}updateProduct(o,n){return this.apiService.put(`${this.endpoint}/${o}`,n)}deleteProduct(o){return this.apiService.delete(`${this.endpoint}/${o}`)}static{this.\u0275fac=function(n){return new(n||r)(u.KVO(R.G))}}static{this.\u0275prov=u.jDH({token:r,factory:r.\u0275fac})}}return r})();const D=()=>["form/new"],T=(r,d,o)=>({itemsPerPage:r,currentPage:d,totalItems:o,id:"list"}),E=r=>[r];function $(r,d){if(1&r&&t.nrm(0,"span"),2&r){const o=t.XpG();t.HbH(o.class)}}function G(r,d){if(1&r&&t.nrm(0,"span"),2&r){const o=t.XpG();t.HbH(o.class)}}function L(r,d){if(1&r&&t.nrm(0,"span"),2&r){const o=t.XpG();t.HbH(o.class)}}function S(r,d){1&r&&(t.j41(0,"tr")(1,"td",23)(2,"div",24)(3,"span",25),t.EFF(4,"Loading..."),t.k0s()()()())}function M(r,d){if(1&r&&(t.j41(0,"tr",26)(1,"td",23),t.EFF(2),t.k0s()()),2&r){const o=t.XpG();t.R7$(2),t.SpI(" ",o.error," ")}}function N(r,d){if(1&r){const o=t.RV6();t.j41(0,"tr")(1,"td")(2,"a",27),t.nrm(3,"i",28),t.k0s(),t.j41(4,"a",29),t.nrm(5,"i",30),t.k0s(),t.j41(6,"a",31),t.bIt("click",function(){const e=u.eBV(o).$implicit,i=t.XpG();return u.Njj(i.deleteProduct(e.id))}),t.nrm(7,"i",32),t.k0s()(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s()()}if(2&r){const o=d.$implicit;t.R7$(2),t.Y8G("routerLink",t.eq3(5,E,"view/"+o.id)),t.R7$(2),t.Y8G("routerLink",t.eq3(7,E,"form/"+o.id)),t.R7$(5),t.JRh(o.code),t.R7$(2),t.JRh(o.uom),t.R7$(2),t.JRh(o.category)}}function U(r,d){1&r&&(t.j41(0,"tr")(1,"td",23),t.EFF(2,"No products found"),t.k0s()())}let Y=(()=>{class r{constructor(o){this.productService=o,this.products=[],this.loading=!1,this.error="",this.paginationData={total:0,from:0,to:0,prev_page_url:null,next_page_url:null,per_page:v.v.PAGINATION.PER_PAGE,current_page:v.v.PAGINATION.DEFAULT_PAGE},this.search={code:"",uom:"",category:""},this.key=v.k.DEFAULT_SORT_KEY,this.order="ASC",this.class="",this.reverse=!0,this.searchNotifier=new j.B}ngOnInit(){this.getData(),this.searchNotifier.pipe((0,I.B)(750)).subscribe(()=>this.getData())}getReset(){Object.keys(this.search).forEach(o=>{this.search[o]=""}),this.getData()}sort(o=""){""!=o?(this.key=o,this.reverse?(this.order="ASC",this.class="fa fa-sort-alpha-asc"):(this.order="DESC",this.class="fa fa-sort-alpha-desc")):(this.key="",this.order=""),this.reverse=!this.reverse,this.getData(this.paginationData.current_page)}getData(o=1){this.loading=!0,this.error="";let n={page:o,per_page:this.paginationData.per_page};Object.keys(this.search).forEach(e=>{""!==this.search[e]&&(n[`search[${e}]`]=this.search[e])}),this.key&&(n[`sort[${this.key}]`]=this.order),this.productService.getProducts(n).subscribe({next:e=>{e.success&&e.data?(this.products=e.data.data||[],this.paginationData={total:e.data.meta?.total||0,from:e.data.meta?.from||0,to:e.data.meta?.to||0,prev_page_url:e.data.meta?.prev_page_url,next_page_url:e.data.meta?.next_page_url,per_page:e.data.meta?.per_page||this.paginationData.per_page,current_page:e.data.meta?.current_page||1,id:"list"}):this.error="Failed to load products",this.loading=!1},error:e=>{console.error("Error loading products:",e),this.error="An error occurred while loading products",this.loading=!1}})}deleteProduct(o){confirm("Are you sure you want to delete this product?")&&this.productService.deleteProduct(o).subscribe({next:n=>{n.success&&this.getData(this.paginationData.current_page)},error:n=>{console.error("Error deleting product:",n),alert("Failed to delete product")}})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(p))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-list"]],standalone:!1,decls:52,vars:22,consts:[[1,"card"],[1,"card-header"],[1,"card-header-right"],[1,"btn","btn-primary",3,"routerLink"],[1,"feather","icon-plus"],[1,"card-body","table-border-style","p-0"],[1,"table-responsive"],[1,"table","table-hover"],[2,"width","100px"],[3,"click"],[3,"class",4,"ngIf"],["data-original-title","","title","Search",1,"primary","p-0",3,"click"],[1,"fa","fa-search","font-medium-1","mr-1"],["data-original-title","","title","Clear",1,"danger","p-0",3,"click"],[1,"feather","icon-x","font-medium-1","mr-1"],["type","text","placeholder","Search code...",3,"ngModelChange","ngModel"],["type","text","placeholder","Search UOM...",3,"ngModelChange","ngModel"],["type","text","placeholder","Search category...",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["id","list",3,"pageChange"],["colspan","4",1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-danger"],["title","View",1,"warning","p-0","me-2",3,"routerLink"],[1,"feather","icon-eye"],["title","Edit",1,"warning","p-0","me-2",3,"routerLink"],[1,"feather","icon-edit"],["title","Delete",1,"warning","p-0",3,"click"],[1,"feather","icon-trash-2"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3,"Product List"),t.k0s(),t.j41(4,"div",2)(5,"button",3),t.nrm(6,"i",4),t.EFF(7," Add New Product "),t.k0s()()(),t.j41(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th",8),t.EFF(14,"Action"),t.k0s(),t.j41(15,"th")(16,"a",9),t.bIt("click",function(){return e.sort("code")}),t.EFF(17," Product Code "),t.DNE(18,$,1,2,"span",10),t.k0s()(),t.j41(19,"th")(20,"a",9),t.bIt("click",function(){return e.sort("uom")}),t.EFF(21," Unit of Measurement "),t.DNE(22,G,1,2,"span",10),t.k0s()(),t.j41(23,"th")(24,"a",9),t.bIt("click",function(){return e.sort("category")}),t.EFF(25," Category "),t.DNE(26,L,1,2,"span",10),t.k0s()()(),t.j41(27,"tr")(28,"th")(29,"a",11),t.bIt("click",function(){return e.getData()}),t.nrm(30,"i",12),t.k0s(),t.EFF(31," \xa0\xa0 "),t.j41(32,"a",13),t.bIt("click",function(){return e.getReset()}),t.nrm(33,"i",14),t.k0s()(),t.j41(34,"th")(35,"input",15),t.mxI("ngModelChange",function(a){return t.DH7(e.search.code,a)||(e.search.code=a),a}),t.bIt("ngModelChange",function(){return e.searchNotifier.next()}),t.k0s()(),t.j41(36,"th")(37,"input",16),t.mxI("ngModelChange",function(a){return t.DH7(e.search.uom,a)||(e.search.uom=a),a}),t.bIt("ngModelChange",function(){return e.searchNotifier.next()}),t.k0s()(),t.j41(38,"th")(39,"input",17),t.mxI("ngModelChange",function(a){return t.DH7(e.search.category,a)||(e.search.category=a),a}),t.bIt("ngModelChange",function(){return e.searchNotifier.next()}),t.k0s()()()(),t.j41(40,"tbody"),t.DNE(41,S,5,0,"tr",18)(42,M,3,1,"tr",19)(43,N,14,9,"tr",20),t.nI1(44,"paginate"),t.DNE(45,U,3,0,"tr",18),t.k0s()(),t.j41(46,"div",21)(47,"div"),t.EFF(48),t.k0s(),t.j41(49,"div")(50,"nav")(51,"pagination-controls",22),t.bIt("pageChange",function(a){return e.getData(a)}),t.k0s()()()()()()()),2&n&&(t.R7$(5),t.Y8G("routerLink",t.lJ4(17,D)),t.R7$(13),t.Y8G("ngIf","code"==e.key),t.R7$(4),t.Y8G("ngIf","uom"==e.key),t.R7$(4),t.Y8G("ngIf","category"==e.key),t.R7$(9),t.R50("ngModel",e.search.code),t.R7$(2),t.R50("ngModel",e.search.uom),t.R7$(2),t.R50("ngModel",e.search.category),t.R7$(2),t.Y8G("ngIf",e.loading),t.R7$(),t.Y8G("ngIf",e.error),t.R7$(),t.Y8G("ngForOf",t.i5U(44,14,e.products,t.sMw(18,T,e.paginationData.per_page,e.paginationData.current_page,e.paginationData.total))),t.R7$(2),t.Y8G("ngIf",!e.loading&&!e.error&&0===e.products.length),t.R7$(3),t.E5c(" Showing ",e.paginationData.from," to ",e.paginationData.to," of ",e.paginationData.total," Entries "))},dependencies:[l.Sq,l.bT,c.me,c.BC,c.vS,F.Wk,_.ej,_.kf],encapsulation:2})}}return r})();var P=s(8738),y=s(7303);const k=r=>({"is-invalid":r});function w(r,d){1&r&&(t.j41(0,"div",18)(1,"div",19)(2,"span",20),t.EFF(3,"Loading..."),t.k0s()()())}function A(r,d){1&r&&(t.j41(0,"div",21),t.EFF(1," Product code is required "),t.k0s())}function X(r,d){1&r&&(t.j41(0,"div",21),t.EFF(1," Unit of measurement is required "),t.k0s())}function B(r,d){1&r&&(t.j41(0,"div",21),t.EFF(1," Category is required "),t.k0s())}let O=(()=>{class r{constructor(o,n,e,i){this.fb=o,this.route=n,this.location=e,this.productService=i,this.isEditing=!1,this.loading=!1,this.productId=null,this.productForm=this.fb.group({code:["",[c.k0.required]],uom:["",[c.k0.required]],category:["",[c.k0.required]]})}ngOnInit(){this.productId="new"===this.route.snapshot.params.id?null:+this.route.snapshot.params.id,this.productId&&(this.isEditing=!0,this.loadProductData())}loadProductData(){this.loading=!0,this.productService.getProduct(this.productId).subscribe({next:o=>{o.success&&o.data&&this.productForm.patchValue(o.data),this.loading=!1},error:o=>{console.error("Error loading product:",o),this.loading=!1}})}onSubmit(){if(this.productForm.invalid)return void Object.keys(this.productForm.controls).forEach(n=>{const e=this.productForm.get(n);e?.invalid&&e.markAsTouched()});const o=this.productForm.value;this.loading=!0,this.isEditing?this.productService.updateProduct(this.productId,o).subscribe({next:n=>{this.loading=!1,n.success&&this.goBack()},error:n=>{this.loading=!1,console.error("Error updating product:",n)}}):this.productService.createProduct(o).subscribe({next:n=>{this.loading=!1,n.success&&this.goBack()},error:n=>{this.loading=!1,console.error("Error creating product:",n)}})}goBack(){this.location.back()}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(c.ok),t.rXU(P.nX),t.rXU(y.aZ),t.rXU(p))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-form"]],standalone:!1,decls:37,vars:17,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],["class","text-center mb-3",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"mb-3"],[1,"form-group","mb-3"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","code",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","uom",1,"form-control",3,"ngClass"],["type","text","formControlName","category",1,"form-control",3,"ngClass"],[1,"text-end","mt-4"],["type","button",1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center","mb-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"invalid-feedback"]],template:function(n,e){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3),t.k0s()(),t.j41(4,"div",2)(5,"form",3),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.DNE(6,w,4,0,"div",4),t.j41(7,"div",5)(8,"div",6)(9,"h6",7),t.EFF(10,"Product Information"),t.k0s(),t.j41(11,"div",8)(12,"label",9),t.EFF(13,"Product Code "),t.j41(14,"span",10),t.EFF(15,"*"),t.k0s()(),t.nrm(16,"input",11),t.DNE(17,A,2,0,"div",12),t.k0s(),t.j41(18,"div",8)(19,"label",9),t.EFF(20,"Unit of Measurement (UOM) "),t.j41(21,"span",10),t.EFF(22,"*"),t.k0s()(),t.nrm(23,"input",13),t.DNE(24,X,2,0,"div",12),t.k0s(),t.j41(25,"div",8)(26,"label",9),t.EFF(27,"Category "),t.j41(28,"span",10),t.EFF(29,"*"),t.k0s()(),t.nrm(30,"input",14),t.DNE(31,B,2,0,"div",12),t.k0s()()(),t.j41(32,"div",15)(33,"button",16),t.bIt("click",function(){return e.goBack()}),t.EFF(34,"Cancel"),t.k0s(),t.j41(35,"button",17),t.EFF(36),t.k0s()()()()()),2&n){let i,a,m,h,g,f;t.R7$(3),t.SpI("",e.isEditing?"Edit":"Add"," Product"),t.R7$(2),t.Y8G("formGroup",e.productForm),t.R7$(),t.Y8G("ngIf",e.loading),t.R7$(10),t.Y8G("ngClass",t.eq3(11,k,(null==(i=e.productForm.get("code"))?null:i.touched)&&(null==(i=e.productForm.get("code"))?null:i.invalid))),t.R7$(),t.Y8G("ngIf",(null==(a=e.productForm.get("code"))?null:a.touched)&&(null==(a=e.productForm.get("code"))?null:a.invalid)),t.R7$(6),t.Y8G("ngClass",t.eq3(13,k,(null==(m=e.productForm.get("uom"))?null:m.touched)&&(null==(m=e.productForm.get("uom"))?null:m.invalid))),t.R7$(),t.Y8G("ngIf",(null==(h=e.productForm.get("uom"))?null:h.touched)&&(null==(h=e.productForm.get("uom"))?null:h.invalid)),t.R7$(6),t.Y8G("ngClass",t.eq3(15,k,(null==(g=e.productForm.get("category"))?null:g.touched)&&(null==(g=e.productForm.get("category"))?null:g.invalid))),t.R7$(),t.Y8G("ngIf",(null==(f=e.productForm.get("category"))?null:f.touched)&&(null==(f=e.productForm.get("category"))?null:f.invalid)),t.R7$(4),t.Y8G("disabled",e.loading),t.R7$(),t.SpI(" ",e.isEditing?"Update":"Create"," Product ")}},dependencies:[l.YU,l.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD],encapsulation:2})}}return r})();const V=r=>[r];function J(r,d){1&r&&(t.j41(0,"div",10)(1,"div",11)(2,"span",12),t.EFF(3,"Loading..."),t.k0s()()())}function H(r,d){if(1&r&&(t.j41(0,"div")(1,"div",13)(2,"div",14)(3,"h6",15),t.EFF(4,"Product Information"),t.k0s(),t.j41(5,"table",16)(6,"tbody")(7,"tr")(8,"th",17),t.EFF(9,"Product ID"),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s()(),t.j41(12,"tr")(13,"th"),t.EFF(14,"Product Code"),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s()(),t.j41(17,"tr")(18,"th"),t.EFF(19,"Unit of Measurement (UOM)"),t.k0s(),t.j41(20,"td"),t.EFF(21),t.k0s()(),t.j41(22,"tr")(23,"th"),t.EFF(24,"Category"),t.k0s(),t.j41(25,"td"),t.EFF(26),t.k0s()()()()(),t.j41(27,"div",18)(28,"h6",15),t.EFF(29,"Timestamps"),t.k0s(),t.j41(30,"table",16)(31,"tbody")(32,"tr")(33,"th",19),t.EFF(34,"Created At"),t.k0s(),t.j41(35,"td"),t.EFF(36),t.nI1(37,"date"),t.k0s()(),t.j41(38,"tr")(39,"th"),t.EFF(40,"Last Updated"),t.k0s(),t.j41(41,"td"),t.EFF(42),t.nI1(43,"date"),t.k0s()()()()()()()),2&r){const o=t.XpG();t.R7$(11),t.JRh(o.product.id),t.R7$(5),t.JRh(o.product.code),t.R7$(5),t.JRh(o.product.uom),t.R7$(5),t.JRh(o.product.category),t.R7$(10),t.JRh(t.i5U(37,6,o.product.created_at,"medium")),t.R7$(6),t.JRh(t.i5U(43,9,o.product.updated_at,"medium"))}}function K(r,d){1&r&&(t.j41(0,"div",10)(1,"p",20),t.EFF(2,"Product not found"),t.k0s()())}let W=(()=>{class r{constructor(o,n,e){this.route=o,this.location=n,this.productService=e,this.product=null,this.loading=!1,this.productId=null}ngOnInit(){this.productId=+this.route.snapshot.params.id,this.productId&&this.loadProductData()}loadProductData(){this.loading=!0,this.productService.getProduct(this.productId).subscribe({next:o=>{o.success&&o.data&&(this.product=o.data),this.loading=!1},error:o=>{console.error("Error loading product:",o),this.loading=!1}})}goBack(){this.location.back()}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(P.nX),t.rXU(y.aZ),t.rXU(p))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-view"]],standalone:!1,decls:15,vars:6,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"button-group"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-arrow-left"],["type","button",1,"btn","btn-secondary","ms-2",3,"routerLink"],[1,"feather","icon-edit"],[1,"card-body"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row"],[1,"col-md-8","mb-4"],[1,"mb-3"],[1,"table","table-bordered"],["width","30%"],[1,"col-md-4","mb-4"],["width","40%"],[1,"text-muted"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3,"Product Details"),t.k0s(),t.j41(4,"div",2)(5,"button",3),t.bIt("click",function(){return e.goBack()}),t.nrm(6,"i",4),t.EFF(7," Back "),t.k0s(),t.j41(8,"button",5),t.nrm(9,"i",6),t.EFF(10," Edit "),t.k0s()()(),t.j41(11,"div",7),t.DNE(12,J,4,0,"div",8)(13,H,44,12,"div",9)(14,K,3,0,"div",8),t.k0s()()),2&n&&(t.R7$(8),t.Y8G("routerLink",t.eq3(4,V,"../../form/"+(null==e.product?null:e.product.id))),t.R7$(4),t.Y8G("ngIf",e.loading),t.R7$(),t.Y8G("ngIf",!e.loading&&e.product),t.R7$(),t.Y8G("ngIf",!e.loading&&!e.product))},dependencies:[l.bT,F.Wk,l.vh],encapsulation:2})}}return r})();var Z=s(2389);const x=[{path:"",component:Y},{path:"form/:id",component:O},{path:"view/:id",component:W}];let z=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=u.G2t({providers:[p],imports:[l.MD,c.YN,c.X1,F.iI.forChild(x),Z.G,_.ed]})}}return r})()}}]);